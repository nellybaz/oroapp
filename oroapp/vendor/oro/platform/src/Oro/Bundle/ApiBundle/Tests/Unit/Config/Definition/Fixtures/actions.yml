empty:
    config: []
    expected: []

empty_root:
    config:
        actions: []
    expected: []

null_actions:
    config:
        actions: ~
    expected: []

exclude_all_actions:
    config:
        actions: false
    expected:
        actions:
            get:
                exclude: true
            get_list:
                exclude: true
            update:
                exclude: true
            create:
                exclude: true
            delete:
                exclude: true
            delete_list:
                exclude: true
            get_subresource:
                exclude: true
            get_relationship:
                exclude: true
            update_relationship:
                exclude: true
            add_relationship:
                exclude: true
            delete_relationship:
                exclude: true

description:
    config:
        actions:
            delete:
                description: test
    expected:
        actions:
            delete:
                description: test

not_permissible_action:
    config:
        actions:
            undefined_action: false
    expected: []
    error: 'Invalid configuration for path "entity.actions": The section "actions.action" contains not permissible actions: "undefined_action". Permissible actions: "get, get_list, update, create, delete, delete_list, get_subresource, get_relationship, update_relationship, add_relationship, delete_relationship".'

null_description:
    config:
        actions:
            delete:
                description: ~
    expected: []
    error: 'The path "entity.actions.delete.description" cannot contain an empty value, but got null.'

empty_description:
    config:
        actions:
            delete:
                description: ""
    expected: []
    error: 'The path "entity.actions.delete.description" cannot contain an empty value, but got "".'

documentation:
    config:
        actions:
            delete:
                documentation: test
    expected:
        actions:
            delete:
                documentation: test

null_documentation:
    config:
        actions:
            delete:
                documentation: ~
    expected: []
    error: 'The path "entity.actions.delete.documentation" cannot contain an empty value, but got null.'

empty_documentation:
    config:
        actions:
            delete:
                documentation: ""
    expected: []
    error: 'The path "entity.actions.delete.documentation" cannot contain an empty value, but got "".'

null_action_default_exclude:
    config:
        actions:
            delete: ~
    expected:
        actions:
            delete:
                exclude: false

exclude_false:
    config:
        actions:
            delete:
                exclude: false
    expected:
        actions:
            delete:
                exclude: false

exclude_true:
    config:
        actions:
            delete:
                exclude: true
    expected:
        actions:
            delete:
                exclude: true

null_acl_resource:
    config:
        actions:
            delete:
                acl_resource: ~
    expected:
        actions:
            delete:
                acl_resource: ~

null_acl_resource_and_null_exclude:
    config:
        actions:
            delete:
                exclude: ~
                acl_resource: ~
    expected:
        actions:
            delete:
                exclude: true
                acl_resource: ~

acl_resource_and_exclude:
    config:
        actions:
            delete:
                exclude: true
                acl_resource: test_acl_resource
    expected:
        actions:
            delete:
                exclude: true
                acl_resource: test_acl_resource

invalid_actions_definition:
    config:
        actions:
            delete:
                delete:
                    exclude: true
                    acl_resource: test_acl_resource
    expected: []
    error: 'Unrecognized option "delete" under "entity.actions.delete"'

invalid_actions_definition_exclude_flag_type:
    config:
        actions:
            delete:
                exclude: test
    expected: []
    error: 'Invalid type for path "entity.actions.delete.exclude". Expected boolean, but got string.'

invalid_actions_definition_unknown_property:
    config:
        actions:
            delete:
                test: test
    expected: []
    error: 'Unrecognized option "test" under "entity.actions.delete"'

default_page_size:
    config:
        actions:
            get_list:
                page_size: ~
    expected: []
    error: 'Invalid type for path "entity.actions.get_list.page_size". Expected int, but got NULL.'

disable_pagination:
    config:
        actions:
            get_list:
                page_size: -1
    expected:
        actions:
            get_list:
                page_size: -1
                max_results: -1

disable_pagination_but_custom_max_results:
    config:
        actions:
            get_list:
                page_size: -1
                max_results: 100
    expected:
        actions:
            get_list:
                page_size: -1
                max_results: 100

invalid_page_size:
    config:
        actions:
            get_list:
                page_size: -2
    expected: []
    error: 'The value -2 is too small for path "entity.actions.get_list.page_size". Should be greater than or equal to -1'

empty_order_by:
    config:
        actions:
            get_list:
                order_by: []
    expected:
        actions:
            get_list: []

order_by:
    config:
        actions:
            get_list:
                order_by:
                    field1: ASC
                    field2: DESC
    expected:
        actions:
            get_list:
                order_by:
                    field1: ASC
                    field2: DESC

invalid_direction_in_order_by:
    config:
        actions:
            get_list:
                order_by:
                    field1: other
    expected: []
    error: 'The value "other" is not allowed for path "entity.actions.get_list.order_by.field1". Permissible values: "ASC", "DESC"'

enable_sorting:
    config:
        actions:
            get_list:
                disable_sorting: false
    expected:
        actions:
            get_list:
                disable_sorting: false

disable_sorting:
    config:
        actions:
            get_list:
                disable_sorting: true
    expected:
        actions:
            get_list:
                disable_sorting: true

invalid_value_for_disable_sorting:
    config:
        actions:
            get_list:
                disable_sorting: 123
    expected: []
    error: 'Invalid type for path "entity.actions.get_list.disable_sorting". Expected boolean, but got integer'

enable_inclusion:
    config:
        actions:
            get_list:
                disable_inclusion: false
    expected:
        actions:
            get_list:
                disable_inclusion: false

disable_inclusion:
    config:
        actions:
            get_list:
                disable_inclusion: true
    expected:
        actions:
            get_list:
                disable_inclusion: true

invalid_value_for_disable_inclusion:
    config:
        actions:
            get_list:
                disable_inclusion: 123
    expected: []
    error: 'Invalid type for path "entity.actions.get_list.disable_inclusion". Expected boolean, but got integer'

enable_fieldset:
    config:
        actions:
            get_list:
                disable_fieldset: false
    expected:
        actions:
            get_list:
                disable_fieldset: false

disable_fieldset:
    config:
        actions:
            get_list:
                disable_fieldset: true
    expected:
        actions:
            get_list:
                disable_fieldset: true

invalid_value_for_disable_fieldset:
    config:
        actions:
            get_list:
                disable_fieldset: 123
    expected: []
    error: 'Invalid type for path "entity.actions.get_list.disable_fieldset". Expected boolean, but got integer'

enable_meta_properties:
    config:
        actions:
            get_list:
                disable_meta_properties: false
    expected:
        actions:
            get_list:
                disable_meta_properties: false

disable_meta_properties:
    config:
        actions:
            get_list:
                disable_meta_properties: true
    expected:
        actions:
            get_list:
                disable_meta_properties: true

invalid_value_for_disable_meta_properties:
    config:
        actions:
            get_list:
                disable_meta_properties: 123
    expected: []
    error: 'Invalid type for path "entity.actions.get_list.disable_meta_properties". Expected boolean, but got integer'

null_status_codes:
    config:
        actions:
            get:
                status_codes: ~
    expected:
        actions:
            get: []

empty_status_codes:
    config:
        actions:
            get:
                status_codes: []
    expected:
        actions:
            get: []

add_status_codes_short_syntax:
    config:
        actions:
            get:
                status_codes:
                    '417': 'Returned when expectations failed'
    expected:
        actions:
            get:
                status_codes:
                    '417':
                        description: 'Returned when expectations failed'

add_status_codes_full_syntax:
    config:
        actions:
            get:
                status_codes:
                    '417':
                        description: 'Returned when expectations failed'
    expected:
        actions:
            get:
                status_codes:
                    '417':
                        description: 'Returned when expectations failed'

delete_status_codes_short_syntax:
    config:
        actions:
            get:
                status_codes:
                    '417': false
    expected:
        actions:
            get:
                status_codes:
                    '417':
                        exclude: true

delete_status_codes_full_syntax:
    config:
        actions:
            get:
                status_codes:
                    '417':
                        exclude: true
    expected:
        actions:
            get:
                status_codes:
                    '417':
                        exclude: true

actions_collections:
    config:
        actions:
            create:
                exclude: true
                acl_resource: create_acl_resource
            get:
                exclude: false
                acl_resource: view_acl_resource
            delete:
                acl_resource: delete_acl_resource
            update: ~
    expected:
        actions:
            create:
                exclude: true
                acl_resource: create_acl_resource
            get:
                exclude: false
                acl_resource: view_acl_resource
            delete:
                acl_resource: delete_acl_resource
            update:
                exclude: false

field_exclude:
    config:
        actions:
            create:
                fields:
                    field1:
                        exclude: true
                    field2:
                        exclude: false
                    field3:
                        exclude: ~
    expected:
        actions:
            create:
                fields:
                    field1:
                        exclude: true
                    field2:
                        exclude: false
                    field3:
                        exclude: true

invalid_field_exclude:
    config:
        actions:
            create:
                fields:
                    field1:
                        exclude: 123
    expected: []
    error: 'Invalid type for path "entity.actions.create.fields.field1.exclude". Expected boolean, but got integer.'

entity_null_form_type:
    config:
        actions:
            create:
                form_type: ~
    expected:
        actions:
            create: []

entity_empty_form_type:
    config:
        actions:
            create:
                form_type: ""
    expected:
        actions:
            create: []

entity_form_type:
    config:
        actions:
            create:
                form_type: integer
    expected:
        actions:
            create:
                form_type: integer

entity_null_form_options:
    config:
        actions:
            create:
                form_options: ~
    expected:
        actions:
            create: []

entity_empty_form_options:
    config:
        actions:
            create:
                form_options: []
    expected:
        actions:
            create: []

entity_empty_form_event_subscriber:
    config:
        form_event_subscriber: []
    expected: []

entity_one_form_event_subscriber:
    config:
        form_event_subscriber: subscriber1
    expected:
        form_event_subscriber: [subscriber1]

entity_several_form_event_subscriber:
    config:
        form_event_subscriber: [subscriber1, subscriber2]
    expected:
        form_event_subscriber: [subscriber1, subscriber2]

entity_invalid_form_event_subscriber:
    config:
        form_event_subscriber: ~
    expected: []
    error: 'Invalid configuration for path "entity.form_event_subscriber": The value must be a string or an array.'

entity_form:
    config:
        actions:
            create:
                form_type: integer
                form_options:
                    option1: value1
    expected:
        actions:
            create:
                form_type: integer
                form_options:
                    option1: value1

invalid_entity_form_type:
    config:
        actions:
            create:
                form_type: []
    expected: []
    error: 'Invalid type for path "entity.actions.create.form_type". Expected scalar, but got array.'

invalid_entity_form_options:
    config:
        actions:
            create:
                form_options: test
    expected: []
    error: 'Invalid type for path "entity.actions.create.form_options". Expected array, but got string'

field_dash_in_field_name:
    config:
        actions:
            create:
                fields:
                    test-field: ~
    expected:
        actions:
            create:
                fields:
                    test-field: []

field_form:
    config:
        actions:
            create:
                fields:
                    field1:
                        form_type: ~
                    field2:
                        form_type: ""
                    field3:
                        form_type: integer
                    field4:
                        form_type: integer
                        form_options: ~
                    field5:
                        form_type: integer
                        form_options: []
                    field6:
                        form_type: integer
                        form_options:
                            option1: value1
    expected:
        actions:
            create:
                fields:
                    field1: []
                    field2: []
                    field3:
                        form_type: integer
                    field4:
                        form_type: integer
                    field5:
                        form_type: integer
                    field6:
                        form_type: integer
                        form_options:
                            option1: value1

invalid_field_form_type:
    config:
        actions:
            create:
                fields:
                    field1:
                        form_type: []
    expected: []
    error: 'Invalid type for path "entity.actions.create.fields.field1.form_type". Expected scalar, but got array.'

invalid_field_form_options:
    config:
        actions:
            create:
                fields:
                    field1:
                        form_options: test
    expected: []
    error: 'Invalid type for path "entity.actions.create.fields.field1.form_options". Expected array, but got string'
