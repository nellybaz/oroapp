{% extends 'OroActionBundle:Operation:form.html.twig' %}

{% block form %}
    {% set buttonOptions = operation.definition.buttonOptions %}
    {% set pageComponentOptions = {} %}
    <div class="widget-content">
        <form id="{{ form.vars.id }}" name="{{ form.vars.name }}" action="{{ app.request.uri }}" {{ form_enctype(form) }}
              method="{{ form.vars.method }}" data-collect="true" class="form-dialog"
              data-page-component-module="oroui/js/app/components/view-component"
              data-page-component-options="{{ {
                  view: 'oropromotion/js/app/views/coupon-generation-preview-view'
              }|json_encode }}"
        >
            <fieldset class="form-horizontal">
                {{ form_widget(form.couponGenerationOptions) }}
                <div class="control-group attribute-row">
                    <label class="control-label">Code Preview</label>
                    <div class="controls">
                        <div id="coupon-code-preview" class="control-label">{{ oro_promotion_generate_coupon_code(actionData.couponGenerationOptions) }}</div>
                    </div>
                </div>
            </fieldset>

            <div class="hidden">
                {{ form_rest(form) }}
            </div>

            <div class="widget-actions">
                <button type="reset" class="btn">{{ 'oro.order.shipping_tracking.action.cancel'|trans }}</button>
                <button type="submit" class="btn btn-success">{{ 'oro.promotion.coupon.generation.action.generate'|trans }}</button>
            </div>
        </form>
        {{ oro_form_js_validation(form) }}
    </div>
{% endblock %}
