services:
    oro_inventory.event_listener.product_manage_inventory_form_view_listener:
        class: 'Oro\Bundle\InventoryBundle\EventListener\ProductManageInventoryFormViewListener'
        parent: oro_inventory.service.fallback_fields_form_view
        tags:
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-view, method: onProductView }
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-edit, method: onProductEdit }
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-create-step-two, method: onProductEdit }

    oro_inventory.event_listener.product_highlight_low_inventory_form_view_listener:
        class: 'Oro\Bundle\InventoryBundle\EventListener\ProductHighlightLowInventoryFormViewListener'
        parent: oro_inventory.service.fallback_fields_form_view
        tags:
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-view, method: onProductView }
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-edit, method: onProductEdit }
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-create-step-two, method: onProductEdit }

    oro_inventory.event_listener.category_manage_inventory_form_view_listener:
        class: 'Oro\Bundle\InventoryBundle\EventListener\CategoryManageInventoryFormViewListener'
        parent: oro_inventory.service.fallback_fields_form_view
        tags:
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.category-edit, method: onCategoryEdit }

    oro_inventory.event_listener.category_highlight_low_inventory_form_view_listener:
        class: 'Oro\Bundle\InventoryBundle\EventListener\CategoryHighlightLowInventoryFormViewListener'
        parent: oro_inventory.service.fallback_fields_form_view
        tags:
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.category-edit, method: onCategoryEdit }

    oro_inventory.event_listener.product_inventory_threshold_form_view_listener:
        class: 'Oro\Bundle\InventoryBundle\EventListener\ProductInventoryThresholdFormViewListener'
        parent: oro_inventory.service.fallback_fields_form_view
        tags:
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-view, method: onProductView }
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-edit, method: onProductEdit }
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-create-step-two, method: onProductEdit }

    oro_inventory.event_listener.product_low_inventory_threshold_form_view_listener:
        class: 'Oro\Bundle\InventoryBundle\EventListener\ProductLowInventoryThresholdFormViewListener'
        parent: oro_inventory.service.fallback_fields_form_view
        tags:
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-view, method: onProductView }
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-edit, method: onProductEdit }
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-create-step-two, method: onProductEdit }

    oro_inventory.event_listener.category_inventory_threshold_form_view_listener:
        class: 'Oro\Bundle\InventoryBundle\EventListener\CategoryInventoryThresholdFormViewListener'
        parent: oro_inventory.service.fallback_fields_form_view
        tags:
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.category-edit, method: onCategoryEdit }

    oro_inventory.event_listener.category_low_inventory_threshold_form_view_listener:
        class: 'Oro\Bundle\InventoryBundle\EventListener\CategoryLowInventoryThresholdFormViewListener'
        parent: oro_inventory.service.fallback_fields_form_view
        tags:
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.category-edit, method: onCategoryEdit }

    oro_inventory.event_listener.product_back_order_form_view_listener:
        class: 'Oro\Bundle\InventoryBundle\EventListener\ProductBackOrderFormViewListener'
        parent: oro_inventory.service.fallback_fields_form_view
        tags:
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-view, method: onProductView }
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-edit, method: onProductEdit }
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-create-step-two, method: onProductEdit }

    oro_inventory.event_listener.product_decrement_quantity_form_view_listener:
        class: 'Oro\Bundle\InventoryBundle\EventListener\ProductDecrementQuantityFormViewListener'
        parent: oro_inventory.service.fallback_fields_form_view
        tags:
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-view, method: onProductView }
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-edit, method: onProductEdit }
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-create-step-two, method: onProductEdit }

    oro_inventory.event_listener.category_inventory_decrement_form_view_listener:
        class: 'Oro\Bundle\InventoryBundle\EventListener\CategoryInventoryDecrementFormViewListener'
        parent: oro_inventory.service.fallback_fields_form_view
        tags:
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.category-edit, method: onCategoryEdit }

    oro_inventory.event_listener.category_inventory_backorder_form_view_listener:
        class: 'Oro\Bundle\InventoryBundle\EventListener\CategoryInventoryBackorderFormViewListener'
        parent: oro_inventory.service.fallback_fields_form_view
        tags:
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.category-edit, method: onCategoryEdit }

    oro_inventory.event_listener.category_quantity_to_order_form_view_listener:
        class: 'Oro\Bundle\InventoryBundle\EventListener\CategoryQuantityToOrderFormViewListener'
        parent: oro_inventory.service.fallback_fields_form_view
        tags:
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.category-edit, method: onCategoryEdit }

    oro_inventory.event_listener.product_upcoming_form_event_listener:
        class: Oro\Bundle\InventoryBundle\EventListener\ProductUpcomingFormViewListener
        parent: oro_inventory.service.fallback_fields_form_view
        tags:
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-view, method: onProductView }
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-edit, method: onProductEdit }
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-create-step-two, method: onProductEdit }

    oro_inventory.event_listener.category_upcoming_form_event_listener:
        class: Oro\Bundle\InventoryBundle\EventListener\CategoryUpcomingFormViewListener
        parent: oro_inventory.service.fallback_fields_form_view
        tags:
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.category-edit, method: onCategoryEdit }

    oro_inventory.event_listener.product_quantity_to_order_form_view_listener:
        class: 'Oro\Bundle\InventoryBundle\EventListener\ProductQuantityToOrderFormViewListener'
        parent: oro_inventory.service.fallback_fields_form_view
        tags:
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-view, method: onProductView }
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-edit, method: onProductEdit }
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.product-create-step-two, method: onProductEdit }

    oro_inventory.event_listener.quantity_to_order_condition_listener:
        class: Oro\Bundle\InventoryBundle\EventListener\QuantityToOrderConditionListener
        arguments:
            - '@oro_inventory.validator.quantity_to_order_validator'
        tags:
            - { name: kernel.event_listener, event: checkout.checkout_validate, method: onCheckoutValidate }
            - { name: kernel.event_listener, event: extendable_condition.start_checkout, method: onStartCheckoutConditionCheck }
            - { name: kernel.event_listener, event: extendable_condition.shopping_list_start, method: onShoppingListStart }
            - { name: kernel.event_listener, event: extendable_condition.checkout, method: onCheckoutConditionCheck }
            - { name: kernel.event_listener, event: quick_add_row_collection.validate, method: onQuickAddRowCollectionValidate }

    oro_inventory.event_listener.line_item_validation_listener:
        class: Oro\Bundle\InventoryBundle\EventListener\LineItemValidationListener
        arguments:
            - '@oro_inventory.validator.quantity_to_order_validator'
            - '@translator'
        tags:
            - { name: kernel.event_listener, event: line_item.validate, method: onLineItemValidate }

    oro_inventory.event_listener.low_inventory_checkout_line_item_validation_listener:
        class: Oro\Bundle\InventoryBundle\EventListener\LowInventoryCheckoutLineItemValidationListener
        arguments:
            - '@oro_inventory.validator.low_inventory_checkout_line_item_validator'
            - '@translator'
        tags:
            - { name: kernel.event_listener, event: line_item.validate, method: onLineItemValidate }

    oro_inventory.event_listener.upcoming_label_checkout_line_item_validation_listener:
        class: Oro\Bundle\InventoryBundle\EventListener\UpcomingLabelCheckoutLineItemValidationListener
        arguments:
            - '@oro_inventory.validator.upcoming_label_checkout_line_item_validator'
            - '@translator'
        tags:
            - { name: kernel.event_listener, event: line_item.validate, method: onLineItemValidate }

    oro_inventory.event_listener.on_rfp_form_error_submit_check_listener:
        class: 'Oro\Bundle\InventoryBundle\EventListener\RFPOperationListener'
        arguments:
            - '@oro_product.layout.data_provider.quick_add_collection'
        tags:
            - { name: kernel.event_listener, event: rfp.form_submit_check.oro_product_frontend_quick_add_copy_paste, method: onCopyPasteRFPFormSubmitCheck }
            - { name: kernel.event_listener, event: rfp.form_submit_check.oro_product_frontend_quick_add_import, method: onQuickAddImportRFPFormSubmitCheck }

    oro_inventory.event_listener.create_order_listener:
        class: Oro\Bundle\InventoryBundle\EventListener\CreateOrderEventListener
        arguments:
            - '@oro_inventory.manager.inventory_quantity_manager'
            - '@oro_inventory.handler.inventory_decrement_status_handler'
            - '@oro_entity.doctrine_helper'
            - '@oro_checkout.data_provider.manager.checkout_line_items'
        tags:
            - { name: kernel.event_listener, event: extendable_action.finish_checkout, method: onCreateOrder, priority: 10 }
            - { name: kernel.event_listener, event: extendable_condition.before_order_create, method: onBeforeOrderCreate, priority: 10 }

    oro_inventory.event_listener.create_order_check_upcoming_listener:
        class: Oro\Bundle\InventoryBundle\EventListener\CreateOrderCheckUpcomingListener
        arguments:
            - '@validator'
        tags:
            - { name: kernel.event_listener, event: extendable_condition.before_order_create, method: onBeforeOrderCreate, priority: 100 }

    oro_inventory.event_listener.create_order_line_item_validation_listener:
        class: Oro\Bundle\InventoryBundle\EventListener\CreateOrderLineItemValidationListener
        arguments:
            - '@oro_inventory.manager.inventory_quantity_manager'
            - '@oro_entity.doctrine_helper'
            - '@translator'
            - '@oro_checkout.data_provider.manager.checkout_line_items'
        tags:
            - { name: kernel.event_listener, event: line_item.validate, method: onLineItemValidate, priority: 10 }

    oro_inventory.event_listener.unit_visibility.datagrid:
        parent: oro_product.event_listener.unit_visibility.datagrid_basic
        arguments:
            index_0: 'unit'
            index_2: 'OroProductBundle:ProductUnit:Datagrid/decimalQuantity.html.twig'
        tags:
            - { name: kernel.event_listener, event: oro_datagrid.datagrid.build.before.inventory-grid, method: onBuildBefore }

    oro_inventory.event_listener.product_flush:
        class: Oro\Bundle\InventoryBundle\EventListener\ProductFlushEventListener
        arguments:
            - "@oro_inventory.manager.inventory_manager"
        tags:
            - { name: doctrine.event_listener, event: onFlush, method: onFlush }
